import{H as k}from"./HeaderComponent-DlW0KALf.js";import{F}from"./FooterComponent-VSHs9k2F.js";import{L as H}from"./LoadingComponent-JXivZofG.js";import{A as w}from"./AsideComponent-RyTUx5wM.js";import{P}from"./ProductCard-L_s7v6sN.js";import{_ as S,r,o as _,a as b,g as o,e as t,F as f,b as $,w as d,f as u,t as c}from"./index-BqzZx0C6.js";import"./FixedIcon-iKJJSqq3.js";const A={components:{HeaderComponent:k,LoadingComponent:H,FooterComponent:F,AsideComponent:w,ProductCard:P},data(){return{isLoading:!1,product:[],chineseTab:[],englishTab:[],user:{num:1},products:[],isChange:!1}},inject:["toast","changeTabs"],methods:{getProduct(a){this.isLoading=!0,this.axios.get("https://vue3-course-api.hexschool.io//v2/api/rongapi/products/all").then(i=>{if(this.isLoading=!1,i.data.success){this.product=i.data.products.filter(s=>s.id===a);const l=i.data.products.filter(s=>s.category.match(this.chineseTab));this.products=l.slice(0,4),this.changeTabs(this.product,/[\u4e00-\u9fa5]/,this.chineseTab),this.changeTabs(this.product,/[a-zA-Z]/,this.englishTab),this.englishTab=String(this.englishTab),this.chineseTab=String(this.chineseTab)}else this.toast("error","尚未抓到資料")}).catch(i=>{this.isLoading=!1,this.toast("error","尚未抓到資料"),console.error("product-getProduct error",i)})},productSubmit(a){this.isChange=!1;const e=this.$route.params.productId;this.axios.post("https://vue3-course-api.hexschool.io//v2/api/rongapi/cart",{data:{product_id:e,qty:a.number}}).then(l=>{l.data.success?(this.toast("success","成功加入購物車"),this.isChange=!0):this.toast("error","失敗，請重新操作")}).catch(l=>{this.toast("error","失敗，請重新操作"),console.error("product-productSubmit error",l)})},count(a){a===!0?this.$refs.count[0].value>=10||this.$refs.count[0].value++:this.$refs.count[0].value<=1||this.$refs.count[0].value--}},created(){this.getProduct(this.$route.params.productId)}},M={class:"has-aside-layout has-header-layout"},N={class:"section-layout container py-40 py-lg-80"},B={class:"col-12 col-lg-5"},j=["src","alt"],q={class:"col-12 col-lg-7"},E={"aria-label":"breadcrumb",class:"mb-4 mt-4 mt-lg-0"},I={class:"breadcrumb"},U={class:"breadcrumb-item text-uppercase"},z={class:"breadcrumb-item text-uppercase"},D={class:"breadcrumb-item"},O={class:"breadcrumb-item active","aria-current":"page"},Z={class:"ff-serif fw-bold mb-4"},G={class:"mb-4"},J={class:"fs-5 me-3"},K={class:"text-decoration-line-through"},Q=t("hr",null,null,-1),R=["innerHTML"],W=t("br",null,null,-1),X=["innerHTML"],Y={class:"d-flex border border-2 border-dark me-4"},tt=t("span",{class:"material-symbols-outlined fs-6"}," remove ",-1),st=[tt],ot={class:"px-2 d-flex justify-content-center align-items-center"},et=t("span",{class:"material-symbols-outlined fs-6"}," add",-1),nt=[et],rt=t("button",{type:"submit",class:"btn btn-primary border-0"}," 加入購物車 ",-1),it={class:"row align-items-center mt-40 mt-lg-80"},ct=t("div",{class:"col-5 col-md-3"},[t("h3",{class:"p-0"},"相關商品")],-1),at=t("div",{class:"col-7 col-md-9"},[t("hr")],-1),lt={class:"col-12"};function dt(a,e,i,l,s,h){const g=r("HeaderComponent"),v=r("LoadingComponent"),C=r("AsideComponent"),T=r("router-view"),p=r("router-link"),y=r("VField"),x=r("VForm"),L=r("ProductCard"),V=r("FooterComponent");return _(),b(f,null,[o(g,{isChange:s.isChange},null,8,["isChange"]),o(v,{isLoading:s.isLoading},null,8,["isLoading"]),o(C),o(T),t("main",M,[t("section",N,[(_(!0),b(f,null,$(s.product,n=>(_(),b("div",{class:"row",key:n.id},[t("div",B,[t("img",{src:n.imageUrl,alt:n.id,class:"img-fluid"},null,8,j)]),t("div",q,[t("nav",E,[t("ol",I,[t("li",U,[o(p,{to:"/"},{default:d(()=>[u("HOME")]),_:1})]),t("li",z,[o(p,{to:`/products/${s.englishTab}`},{default:d(()=>[u(c(s.englishTab),1)]),_:1},8,["to"])]),t("li",D,[o(p,{to:`/products/${s.chineseTab}`},{default:d(()=>[u(c(s.chineseTab)+"類",1)]),_:1},8,["to"])]),t("li",O,c(n.title),1)])]),t("h2",Z,c(n.title),1),t("div",G,[t("span",J,"NT$ "+c(n.price),1),t("span",K,"NT$ "+c(n.origin_price),1)]),Q,t("p",{class:"m-0",innerHTML:n.description},null,8,R),W,t("p",{class:"m-0",innerHTML:n.content},null,8,X),o(x,{onSubmit:h.productSubmit,class:"mt-4 d-flex"},{default:d(()=>[t("div",Y,[t("button",{type:"button",class:"btn btn-outline-dark border-0",onClick:e[0]||(e[0]=m=>h.count(!1))},st),t("div",ot,[o(y,{name:"number",type:"number",modelValue:s.user.num,"onUpdate:modelValue":e[1]||(e[1]=m=>s.user.num=m),rules:"required",ref_for:!0,ref:"count"},{default:d(()=>[u(c(s.user.num),1)]),_:1},8,["modelValue"])]),t("button",{type:"button",class:"btn btn-outline-dark border-0",onClick:e[2]||(e[2]=m=>h.count(!0))},nt)]),rt]),_:1},8,["onSubmit"])])]))),128)),t("div",it,[ct,at,t("div",lt,[o(L,{products:s.products,class:"mt-4"},null,8,["products"])])])])]),o(V)],64)}const gt=S(A,[["render",dt]]);export{gt as default};
